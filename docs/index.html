<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/_reset.css" />
    <link rel="stylesheet" href="css/style.css" />
    <title>Web-Apps-Lean</title>
  </head>

  <body>
    <main>
      <!-- Main content start -->

      <form action="javascrit:void(0);" id="options-form" style="max-width: 300px">
        <div>
          <label for="show-controls">show controls?</label>
          <input type="checkbox" name="show-controls" id="" />
        </div>
      </form>

      <av-writer
        source="media/audio-video/chimps.mp3"
        transcript-url="media/audio-video/transcripts/chimps.json"
        poster="media/images/robo-cat.gif"
        playback-rate="1"
        show-transcript="true"
        show-probabilities="true"
        show-controls="false"
      >
      </av-writer>

      <av-writer
        source="media/audio-video/newscast.mp3"
        transcript-url="media/audio-video/transcripts/newscast.json"
        poster="media/images/atlanta-3.png"
        playback-rate="1"
      >
      </av-writer>

      <av-writer
        source="media/audio-video/friday.mp4"
        transcript-url="media/audio-video/transcripts/friday.json"
        poster=""
        playback-rate="1"
        show-transcript="true"
      >
      </av-writer>

      <!-- Main content end -->
    </main>
    <!-- Scripts -->
    <script type="module" src="js/av-writer.js" defer></script>
    <script defer>
      const optionsForm = document.getElementById("options-form");
      const avWriters = document.querySelectorAll("av-writer");

      optionsForm.addEventListener("change", event => {
        const attribute = event.target.getAttribute("name");
        const value = event.target.checked;

        avWriters.forEach(avWriter => {
          avWriter.setAttribute(attribute, value);
        });
      });
    </script>
  </body>
</html>
