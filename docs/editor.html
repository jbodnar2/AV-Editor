<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./favicon.ico" />
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/main.css" />
    <title>AV Editor</title>
  </head>

  <body>
    <header>
      <div class="container">
        <h1>Editor</h1>
      </div>
    </header>
    <nav>
      <div class="container">
        <ul>
          <li><a href="./">Home</a></li>
          <li>
            <button
              id="clear-local-storage"
              onclick="clearLocalStorage()"
              style="cursor: pointer; height: 100%; background-color: inherit; border: none; color: white"
            >
              Undo Edits
            </button>
          </li>
          <script defer>
            function clearLocalStorage() {
              localStorage.clear();
              location.reload();
            }
          </script>
        </ul>
      </div>
    </nav>
    <main>
      <div class="container editor">
        <!-- Main content start -->

        <!-- Page title -->
        <h2 id="page-title">Video Title</h2>

        <div id="media-wrapper" class="media-wrapper">
          <!-- Media & Global Controls Content -->
        </div>

        <!-- Adding data-show-end dictates whether to show segment end times on button -->
        <div id="editor-wrapper" class="editor-wrapper">
          <!-- Editor Content -->
        </div>

        <!-- Main content end -->
      </div>
    </main>

    <footer></footer>
    <!-- Scripts -->
    <script type="module" defer>
      import { renderMedia } from "./js/components/media.js";
      import { renderEditor } from "./js/components/editor.js";

      const pageTitle = document.querySelector("#page-title");
      const mediaWrapper = document.querySelector("#media-wrapper");
      const editorWrapper = document.querySelector("#editor-wrapper");

      // When DOM loaded, render the media, render the editor (along with its listeners and form submission handling
      document.addEventListener("DOMContentLoaded", () => {
        // Render the media and get the media data
        renderMedia(pageTitle, mediaWrapper).then(mediaData => {
          if (!mediaData) return;

          renderEditor(mediaData, editorWrapper);
        });
      });
    </script>
  </body>
</html>
